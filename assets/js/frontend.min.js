function affwp_is_valid_url(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)}jQuery(document).ready(function(a){a("#affwp-generate-ref-url").submit(function(){var b=a(this).find("#affwp-url").val(),c=a(this).find("#affwp-campaign").val(),d=a(this).find('input[type="hidden"].affwp-referral-var').val(),e=a(this).find('input[type="hidden"].affwp-affiliate-id').val(),f=affwp_vars.pretty_affiliate_urls,g="";if(b.indexOf("#")>0)var h=b.split("#");if(h&&(b=h[0]),f){if(b.indexOf("?")<0)b.match(/\/$/)||(b+="/"),c.length&&(c="?campaign="+c);else{var i=b.split("?");b=i[0],b.match(/\/$/)||(b+="/"),g="/?"+i[1],c.length&&(c="&campaign="+c)}b=b+d+"/"+e+"/"+g+c}else{if(c.length&&(c="&campaign="+c),b.indexOf("?")<0)b.match(/\/$/)||(b+="/");else{var i=b.split("?");b=i[0],b.match(/\/$/)||(b+="/"),g="&"+i[1]}b=b+"?"+d+"="+e+g+c}return h&&(b+="#"+h[1]),b=b.replace(/([^:])(\/\/+)/g,"$1/"),affwp_is_valid_url(b)?(a(".affwp-wrap.affwp-base-url-wrap").find(".affwp-errors").remove(),a(this).find(".affwp-referral-url-wrap").slideDown(),a(this).find("#affwp-referral-url").val(b).focus()):(a(".affwp-wrap.affwp-base-url-wrap").find(".affwp-errors").remove(),a(".affwp-wrap.affwp-base-url-wrap").append('<div class="affwp-errors"><p class="affwp-error">'+affwp_vars.invalid_url+"</p></div>")),!1})});