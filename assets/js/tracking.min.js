jQuery(document).ready(function(a){function i(b,c){a.cookie("affwp_ref",b,{expires:AFFWP.expiration,path:"/"}),a.ajax({type:"POST",data:{action:"affwp_track_visit",affiliate:b,campaign:c,url:document.URL,referrer:document.referrer},url:affwp_scripts.ajaxurl,success:function(b){a.cookie("affwp_ref_visit_id",b,{expires:AFFWP.expiration,path:"/"}),a.cookie("affwp_campaign",c,{expires:AFFWP.expiration,path:"/"})}}).fail(function(a){window.console&&window.console.log&&console.log(a)})}function j(){for(var b,a=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++){b=c[d].split("="),a.push(b[0]);var e="undefined"==typeof b[1]?0:1,f=b[e].indexOf("#");b[e]=b[e].substring(0,f!=-1?f:b[e].length),a[b[0]]=b[e]}return a}var b=a.cookie("affwp_ref"),e=(a.cookie("affwp_ref_visit_id"),a.cookie("affwp_campaign"),AFFWP.referral_credit_last);if("1"==e||!b){var f=j()[AFFWP.referral_var],g=j().campaign;if("undefined"==typeof f){var h=window.location.pathname.split("/");a.each(h,function(a,b){AFFWP.referral_var==b&&(f=h[a+1])})}"undefined"==typeof f||a.isNumeric(f)?f&&!b?i(f,g):"1"==e&&f&&b&&f!==b&&(a.removeCookie("affwp_ref"),i(f,g)):a.ajax({type:"POST",data:{action:"affwp_get_affiliate_id",affiliate:f},url:affwp_scripts.ajaxurl,success:function(c){"1"==c.data.success&&("1"==e&&b&&b!=c.data.affiliate_id&&a.removeCookie("affwp_ref"),("1"==e&&b&&b!=c.data.affiliate_id||!b)&&i(c.data.affiliate_id,g))}}).fail(function(a){window.console&&window.console.log&&console.log(a)})}});